# BlueSky API

This is built as a wrapper for the `atproto` package. While that package is fantastic, it can be a bit tricky to navigate. This package will **hopefully** give a productive user experience.

### Installation
```
pip install bsky-api
```

### Example usage

```
import os
from dotenv import load_dotenv
from bskyapi.clients import BskyApiClient
from bskyapi.scrapers.search_term import SearchTermScraper
from bskyapi.scrapers.follow import ProfileScraper
load_dotenv()

BSKY_USERNAME = os.getenv('BSKY_USERNAME')
BSKY_PASSWORD = os.getenv('BSKY_PASSWORD')

# Create a client -- reuse this across your code rather than instantiating a new one each time
# If you run this frequently, you will be rate limited
client = BskyApiClient(username = BSKY_USERNAME, 
                       password = BSKY_PASSWORD)

# Scrape all posts for the search term "rstats"
st_scraper = SearchTermScraper(client)
rstats_posts = st_scraper.fetch_all_posts("rstats", limit=100)

print(rstats_posts[0])
{'author': {'did': 'did:plc:ctipukv4sf6gsvr2owg7tbbz', 'handle': 'eliocamp.mastodon.social.ap.brid.gy', 'associated': None, 'avatar': None, 'created_at': '0001-01-01T00:00:00.000Z', 'display_name': None, 'labels': [], 'viewer': {'blocked_by': False, 'blocking': None, 'blocking_by_list': None, 'followed_by': None, 'following': None, 'known_followers': None, 'muted': False, 'muted_by_list': None, 'py_type': 'app.bsky.actor.defs#viewerState'}, 'py_type': 'app.bsky.actor.defs#profileViewBasic'}, 'cid': 'bafyreicsjqz4hjpstpq26jzg55lhhfhrtiwilpp2665ozg3lsltrllpwyq', 'indexed_at': '2024-12-11T03:06:13.615Z', 'record': {'created_at': '2024-12-11T03:04:57.000Z', 'text': 'Mood\n\n#RStats', 'embed': {'images': [{'alt': 'Drawing of two people in a bus. The one on the right is looking out the window to a beautiful scene and smiling. The text above says "data anlysis in quarto with Rstudio". The one on the left is looking out the window to a wall of rock and frowning. The text above says "data analysis in a jupyter notebook".', 'image': {'mime_type': 'image/png', 'size': 616797, 'ref': {'link': 'bafkreien7bkk3zk26qmiv5mazq54tnkdasblqff7w5b2zkevpjmi3goidy'}, 'py_type': 'blob'}, 'aspect_ratio': None, 'py_type': 'app.bsky.embed.images#image'}], 'py_type': 'app.bsky.embed.images'}, 'entities': None, 'facets': [{'features': [{'tag': 'rstats', 'py_type': 'app.bsky.richtext.facet#tag'}], 'index': {'byte_end': 13, 'byte_start': 6, 'py_type': 'app.bsky.richtext.facet#byteSlice'}, 'py_type': 'app.bsky.richtext.facet'}], 'labels': None, 'langs': ['en'], 'reply': None, 'tags': None, 'py_type': 'app.bsky.feed.post', 'bridgyOriginalText': '<p>Mood</p><p><a href="https://mastodon.social/tags/RStats" class="mention hashtag" rel="tag">#<span>RStats</span></a></p>', 'bridgyOriginalUrl': 'https://mastodon.social/@eliocamp/113631972400028631'}, 'uri': 'at://did:plc:ctipukv4sf6gsvr2owg7tbbz/app.bsky.feed.post/3lcyrikrjlrv2', 'embed': {'images': [{'alt': 'Drawing of two people in a bus. The one on the right is looking out the window to a beautiful scene and smiling. The text above says "data anlysis in quarto with Rstudio". The one on the left is looking out the window to a wall of rock and frowning. The text above says "data analysis in a jupyter notebook".', 'fullsize': 'https://cdn.bsky.app/img/feed_fullsize/plain/did:plc:ctipukv4sf6gsvr2owg7tbbz/bafkreien7bkk3zk26qmiv5mazq54tnkdasblqff7w5b2zkevpjmi3goidy@jpeg', 'thumb': 'https://cdn.bsky.app/img/feed_thumbnail/plain/did:plc:ctipukv4sf6gsvr2owg7tbbz/bafkreien7bkk3zk26qmiv5mazq54tnkdasblqff7w5b2zkevpjmi3goidy@jpeg', 'aspect_ratio': None, 'py_type': 'app.bsky.embed.images#viewImage'}], 'py_type': 'app.bsky.embed.images#view'}, 'labels': [], 'like_count': 0, 'quote_count': 0, 'reply_count': 0, 'repost_count': 0, 'threadgate': None, 'viewer': {'embedding_disabled': False, 'like': None, 'pinned': None, 'reply_disabled': None, 'repost': None, 'thread_muted': False, 'py_type': 'app.bsky.feed.defs#viewerState'}, 'py_type': 'app.bsky.feed.defs#postView'}

# Scrape user: follows, followers, profiles
pf_scraper = ProfileScraper(client)
profiles = pf_scraper.fetch_all_profiles(["stoltzmaniac.bsky.social", "bsky.app"])
profile_follows = pf_scraper.fetch_all_follows("stoltzmaniac.bsky.social", limit=100)
profile_followers = pf_scraper.fetch_all_followers("stoltzmaniac.bsky.social", limit=100)

print(profile_follows[0])
{'did': 'did:plc:kii6rzst2z7rdchqhdwmu7kn', 'handle': 'omdatascience.bsky.social', 'associated': None, 'avatar': 'https://cdn.bsky.app/img/avatar/plain/did:plc:kii6rzst2z7rdchqhdwmu7kn/bafkreih7t4mkrngnziis2t2hkhwzkvr7monc3majiw6vnrpk6knlw3sdvi@jpeg', 'created_at': '2024-11-18T21:54:02.779Z', 'description': 'Mostly #rstats in #Ecology, #Nature and #LifeScience', 'display_name': 'OneMind-DataScience', 'indexed_at': '2024-11-19T10:22:35.637Z', 'labels': [], 'viewer': {'blocked_by': False, 'blocking': None, 'blocking_by_list': None, 'followed_by': 'at://did:plc:kii6rzst2z7rdchqhdwmu7kn/app.bsky.graph.follow/3lbaw32nbg726', 'following': 'at://did:plc:6p3e4iybr5ipik3c6tx3jpto/app.bsky.graph.follow/3lcgbceohe42n', 'known_followers': None, 'muted': False, 'muted_by_list': None, 'py_type': 'app.bsky.actor.defs#viewerState'}, 'py_type': 'app.bsky.actor.defs#profileView'}

print(profile_followers[0])
{'did': 'did:plc:4kmt3mpxj5gxkta6ducjwaup', 'handle': 'social.syah.in', 'associated': None, 'avatar': 'https://cdn.bsky.app/img/avatar/plain/did:plc:4kmt3mpxj5gxkta6ducjwaup/bafkreifupkmpnnp2r5gbb4ilr2okcyamwb7uwyebgy3xt2lnpxu2nkclzm@jpeg', 'created_at': '2024-12-01T21:54:26.708Z', 'description': 'Follow to get a Follow Back :)', 'display_name': 'Social Butterfly', 'indexed_at': '2024-12-02T11:26:15.408Z', 'labels': [], 'viewer': {'blocked_by': False, 'blocking': None, 'blocking_by_list': None, 'followed_by': 'at://did:plc:4kmt3mpxj5gxkta6ducjwaup/app.bsky.graph.follow/3lchmjymoux2q', 'following': None, 'known_followers': None, 'muted': False, 'muted_by_list': None, 'py_type': 'app.bsky.actor.defs#viewerState'}, 'py_type': 'app.bsky.actor.defs#profileView'}

print(profiles[0])
{'profiles': [{'did': 'did:plc:6p3e4iybr5ipik3c6tx3jpto', 'handle': 'stoltzmaniac.bsky.social', 'associated': {'chat': None, 'feedgens': 0, 'labeler': False, 'lists': 0, 'starter_packs': 0, 'py_type': 'app.bsky.actor.defs#profileAssociated'}, 'avatar': 'https://cdn.bsky.app/img/avatar/plain/did:plc:6p3e4iybr5ipik3c6tx3jpto/bafkreigqvs47mze2av6yeiqpyjjkaee7oymri6ie6fakbplrec4pdyks3e@jpeg', 'banner': 'https://cdn.bsky.app/img/banner/plain/did:plc:6p3e4iybr5ipik3c6tx3jpto/bafkreigsje5iabhrcofw7nuwq7isa7rsk3ynpuvaiwjjhd3pgbvew4eyt4@jpeg', 'created_at': '2024-01-31T03:47:29.522Z', 'description': 'You’re the data guy right?\n\nYeah!\n\nCan you fix my printer?', 'display_name': 'Scott Stoltzman', 'followers_count': 17, 'follows_count': 157, 'indexed_at': '2024-11-30T16:58:22.808Z', 'joined_via_starter_pack': None, 'labels': [], 'pinned_post': {'cid': 'bafyreibmvvwe4uu4c5llgtlxl4m5hftxhlgjslja5tiiw5rsv2umgi2acu', 'uri': 'at://did:plc:6p3e4iybr5ipik3c6tx3jpto/app.bsky.feed.post/3lb6ukxvo4c2f', 'py_type': 'com.atproto.repo.strongRef'}, 'posts_count': 11, 'viewer': {'blocked_by': False, 'blocking': None, 'blocking_by_list': None, 'followed_by': None, 'following': None, 'known_followers': {'count': 5, 'followers': [{'did': 'did:plc:h7p2smbyfobkpcs7dbgvhmeh', 'handle': 'lcolladotor.bsky.social', 'associated': {'chat': {'allow_incoming': 'following', 'py_type': 'app.bsky.actor.defs#profileAssociatedChat'}, 'feedgens': None, 'labeler': None, 'lists': None, 'starter_packs': None, 'py_type': 'app.bsky.actor.defs#profileAssociated'}, 'avatar': 'https://cdn.bsky.app/img/avatar/plain/did:plc:h7p2smbyfobkpcs7dbgvhmeh/bafkreic3ro5l2e56g4ajjkiwdrhphjkuwemvaa5bfs3lth6duhmr5w6slu@jpeg', 'created_at': '2023-09-06T01:01:11.160Z', 'display_name': '🇲🇽 Leonardo Collado-Torres', 'labels': [], 'viewer': {'blocked_by': False, 'blocking': None, 'blocking_by_list': None, 'followed_by': 'at://did:plc:h7p2smbyfobkpcs7dbgvhmeh/app.bsky.graph.follow/3lba7ubnl7g23', 'following': 'at://did:plc:6p3e4iybr5ipik3c6tx3jpto/app.bsky.graph.follow/3lba7kqvltu2u', 'known_followers': None, 'muted': False, 'muted_by_list': None, 'py_type': 'app.bsky.actor.defs#viewerState'}, 'py_type': 'app.bsky.actor.defs#profileViewBasic'}, {'did': 'did:plc:lsgc3t2a474yb6nq2nd5nftv', 'handle': 'ramikrispin.bsky.social', 'associated': {'chat': {'allow_incoming': 'following', 'py_type': 'app.bsky.actor.defs#profileAssociatedChat'}, 'feedgens': None, 'labeler': None, 'lists': None, 'starter_packs': None, 'py_type': 'app.bsky.actor.defs#profileAssociated'}, 'avatar': 'https://cdn.bsky.app/img/avatar/plain/did:plc:lsgc3t2a474yb6nq2nd5nftv/bafkreigxubduy656yuqw5jrr7jkulh2ga3s4maratlrdifqb6c3erzwzw4@jpeg', 'created_at': '2024-01-02T06:22:51.568Z', 'display_name': 'Rami Krispin', 'labels': [], 'viewer': {'blocked_by': False, 'blocking': None, 'blocking_by_list': None, 'followed_by': 'at://did:plc:lsgc3t2a474yb6nq2nd5nftv/app.bsky.graph.follow/3lbabnz2ls62r', 'following': 'at://did:plc:6p3e4iybr5ipik3c6tx3jpto/app.bsky.graph.follow/3lba7kqvltl2u', 'known_followers': None, 'muted': False, 'muted_by_list': None, 'py_type': 'app.bsky.actor.defs#viewerState'}, 'py_type': 'app.bsky.actor.defs#profileViewBasic'}, {'did': 'did:plc:3fsi5io5dymmli77dqrtpsqc', 'handle': 'jhollist.bsky.social', 'associated': None, 'avatar': 'https://cdn.bsky.app/img/avatar/plain/did:plc:3fsi5io5dymmli77dqrtpsqc/bafkreifxmmsod5cqu6x3orjd3usqrijxg2hssvvv5fdnn47raclxfboxle@jpeg', 'created_at': '2023-12-04T12:14:40.765Z', 'display_name': 'Jeff Hollister', 'labels': [], 'viewer': {'blocked_by': False, 'blocking': None, 'blocking_by_list': None, 'followed_by': 'at://did:plc:3fsi5io5dymmli77dqrtpsqc/app.bsky.graph.follow/3lbba2g7on22z', 'following': 'at://did:plc:6p3e4iybr5ipik3c6tx3jpto/app.bsky.graph.follow/3lba7kqvluc2u', 'known_followers': None, 'muted': False, 'muted_by_list': None, 'py_type': 'app.bsky.actor.defs#viewerState'}, 'py_type': 'app.bsky.actor.defs#profileViewBasic'}, {'did': 'did:plc:aqr5h6q7clmeheft3sknegcl', 'handle': 'econmaett.bsky.social', 'associated': None, 'avatar': 'https://cdn.bsky.app/img/avatar/plain/did:plc:aqr5h6q7clmeheft3sknegcl/bafkreifjvp22z2atw2hjxhpqc66z6sdamanc637rptkmjf55fp44v5ip4m@jpeg', 'created_at': '2024-09-13T12:38:13.046Z', 'display_name': 'EconFella', 'labels': [], 'viewer': {'blocked_by': False, 'blocking': None, 'blocking_by_list': None, 'followed_by': 'at://did:plc:aqr5h6q7clmeheft3sknegcl/app.bsky.graph.follow/3lbbdelgsm22t', 'following': 'at://did:plc:6p3e4iybr5ipik3c6tx3jpto/app.bsky.graph.follow/3lcgbc6kbbf2r', 'known_followers': None, 'muted': False, 'muted_by_list': None, 'py_type': 'app.bsky.actor.defs#viewerState'}, 'py_type': 'app.bsky.actor.defs#profileViewBasic'}, {'did': 'did:plc:kii6rzst2z7rdchqhdwmu7kn', 'handle': 'omdatascience.bsky.social', 'associated': None, 'avatar': 'https://cdn.bsky.app/img/avatar/plain/did:plc:kii6rzst2z7rdchqhdwmu7kn/bafkreih7t4mkrngnziis2t2hkhwzkvr7monc3majiw6vnrpk6knlw3sdvi@jpeg', 'created_at': '2024-11-18T21:54:02.779Z', 'display_name': 'OneMind-DataScience', 'labels': [], 'viewer': {'blocked_by': False, 'blocking': None, 'blocking_by_list': None, 'followed_by': 'at://did:plc:kii6rzst2z7rdchqhdwmu7kn/app.bsky.graph.follow/3lbaw32nbg726', 'following': 'at://did:plc:6p3e4iybr5ipik3c6tx3jpto/app.bsky.graph.follow/3lcgbceohe42n', 'known_followers': None, 'muted': False, 'muted_by_list': None, 'py_type': 'app.bsky.actor.defs#viewerState'}, 'py_type': 'app.bsky.actor.defs#profileViewBasic'}], 'py_type': 'app.bsky.actor.defs#knownFollowers'}, 'muted': False, 'muted_by_list': None, 'py_type': 'app.bsky.actor.defs#viewerState'}, 'py_type': 'app.bsky.actor.defs#profileViewDetailed'}, {'did': 'did:plc:z72i7hdynmk6r22z27h6tvur', 'handle': 'bsky.app', 'associated': {'chat': {'allow_incoming': 'none', 'py_type': 'app.bsky.actor.defs#profileAssociatedChat'}, 'feedgens': 6, 'labeler': False, 'lists': 2, 'starter_packs': 0, 'py_type': 'app.bsky.actor.defs#profileAssociated'}, 'avatar': 'https://cdn.bsky.app/img/avatar/plain/did:plc:z72i7hdynmk6r22z27h6tvur/bafkreihagr2cmvl2jt4mgx3sppwe2it3fwolkrbtjrhcnwjk4jdijhsoze@jpeg', 'banner': 'https://cdn.bsky.app/img/banner/plain/did:plc:z72i7hdynmk6r22z27h6tvur/bafkreichzyovokfzmymz36p5jibbjrhsur6n7hjnzxrpbt5jaydp2szvna@jpeg', 'created_at': '2023-04-12T04:53:57.057Z', 'description': 'official Bluesky account (check username👆)\n\nPress: press@blueskyweb.xyz\nSupport: support@bsky.app', 'display_name': 'Bluesky', 'followers_count': 17622336, 'follows_count': 2, 'indexed_at': '2024-11-21T18:47:43.734Z', 'joined_via_starter_pack': None, 'labels': [], 'pinned_post': {'cid': 'bafyreicnt42y6vo6pfpvyro234ac4o6ijug6adwwrh7awflgrqlt4zibxq', 'uri': 'at://did:plc:z72i7hdynmk6r22z27h6tvur/app.bsky.feed.post/3l6oveex3ii2l', 'py_type': 'com.atproto.repo.strongRef'}, 'posts_count': 472, 'viewer': {'blocked_by': False, 'blocking': None, 'blocking_by_list': None, 'followed_by': None, 'following': 'at://did:plc:6p3e4iybr5ipik3c6tx3jpto/app.bsky.graph.follow/3kkar23ihuk2a', 'known_followers': {'count': 72, 'followers': [{'did': 'did:plc:nzrozayxq764zbgl4qtp5ald', 'handle': 'b0rk.jvns.ca', 'associated': {'chat': {'allow_incoming': 'following', 'py_type': 'app.bsky.actor.defs#profileAssociatedChat'}, 'feedgens': None, 'labeler': None, 'lists': None, 'starter_packs': None, 'py_type': 'app.bsky.actor.defs#profileAssociated'}, 'avatar': 'https://cdn.bsky.app/img/avatar/plain/did:plc:nzrozayxq764zbgl4qtp5ald/bafkreibfczzjr6hfhicpqsz7xq5jjoefuxv23p26gflzwcmhvyapcgyxum@jpeg', 'created_at': '2023-04-26T10:22:51.579Z', 'display_name': 'Julia Evans', 'labels': [], 'viewer': {'blocked_by': False, 'blocking': None, 'blocking_by_list': None, 'followed_by': None, 'following': 'at://did:plc:6p3e4iybr5ipik3c6tx3jpto/app.bsky.graph.follow/3la5q2ljshs2y', 'known_followers': None, 'muted': False, 'muted_by_list': None, 'py_type': 'app.bsky.actor.defs#viewerState'}, 'py_type': 'app.bsky.actor.defs#profileViewBasic'}, {'did': 'did:plc:bc6xsexjwe3bcrhtzxklsygf', 'handle': 'schrarstzhaupt.bsky.social', 'associated': {'chat': {'allow_incoming': 'all', 'py_type': 'app.bsky.actor.defs#profileAssociatedChat'}, 'feedgens': None, 'labeler': None, 'lists': None, 'starter_packs': None, 'py_type': 'app.bsky.actor.defs#profileAssociated'}, 'avatar': 'https://cdn.bsky.app/img/avatar/plain/did:plc:bc6xsexjwe3bcrhtzxklsygf/bafkreibvf4genikmed6f7y6jgwfgoqirmf4ckc7igqzileeadrybf6reia@jpeg', 'created_at': '2023-04-08T01:52:55.771Z', 'display_name': 'Isaac Schrarstzhaupt (é Chuárti Záupiti que fala!)', 'labels': [], 'viewer': {'blocked_by': False, 'blocking': None, 'blocking_by_list': None, 'followed_by': None, 'following': 'at://did:plc:6p3e4iybr5ipik3c6tx3jpto/app.bsky.graph.follow/3lba7kqvltr2u', 'known_followers': None, 'muted': False, 'muted_by_list': None, 'py_type': 'app.bsky.actor.defs#viewerState'}, 'py_type': 'app.bsky.actor.defs#profileViewBasic'}, {'did': 'did:plc:npzzaoh4b7jtr52q5nz6isve', 'handle': 'sherlockpholmes.bsky.social', 'associated': None, 'avatar': 'https://cdn.bsky.app/img/avatar/plain/did:plc:npzzaoh4b7jtr52q5nz6isve/bafkreifirmlndxg3phl4o5dq5bodda73v4m6bregf6bb4tlunpltgnmlwu@jpeg', 'created_at': '2023-08-05T13:43:26.700Z', 'display_name': 'Susan Holmes🎲🖥️🧬', 'labels': [], 'viewer': {'blocked_by': False, 'blocking': None, 'blocking_by_list': None, 'followed_by': None, 'following': 'at://did:plc:6p3e4iybr5ipik3c6tx3jpto/app.bsky.graph.follow/3lba7kqvlsy2u', 'known_followers': None, 'muted': False, 'muted_by_list': None, 'py_type': 'app.bsky.actor.defs#viewerState'}, 'py_type': 'app.bsky.actor.defs#profileViewBasic'}, {'did': 'did:plc:ppvxhapnptcy5v6cih3ynmzg', 'handle': 'stephenturner.us', 'associated': {'chat': {'allow_incoming': 'following', 'py_type': 'app.bsky.actor.defs#profileAssociatedChat'}, 'feedgens': None, 'labeler': None, 'lists': None, 'starter_packs': None, 'py_type': 'app.bsky.actor.defs#profileAssociated'}, 'avatar': 'https://cdn.bsky.app/img/avatar/plain/did:plc:ppvxhapnptcy5v6cih3ynmzg/bafkreif6sokzuisvfmv6hd3rzfhraijpk3o7236wiuydhz7bfaxvac62wm@jpeg', 'created_at': '2023-04-27T11:04:43.823Z', 'display_name': 'Stephen Turner', 'labels': [], 'viewer': {'blocked_by': False, 'blocking': None, 'blocking_by_list': None, 'followed_by': None, 'following': 'at://did:plc:6p3e4iybr5ipik3c6tx3jpto/app.bsky.graph.follow/3lba7kqvmub2u', 'known_followers': None, 'muted': False, 'muted_by_list': None, 'py_type': 'app.bsky.actor.defs#viewerState'}, 'py_type': 'app.bsky.actor.defs#profileViewBasic'}, {'did': 'did:plc:kxrymabcfc3rhmpvzmymmx5o', 'handle': 'wkhuber.bsky.social', 'associated': {'chat': {'allow_incoming': 'following', 'py_type': 'app.bsky.actor.defs#profileAssociatedChat'}, 'feedgens': None, 'labeler': None, 'lists': None, 'starter_packs': None, 'py_type': 'app.bsky.actor.defs#profileAssociated'}, 'avatar': 'https://cdn.bsky.app/img/avatar/plain/did:plc:kxrymabcfc3rhmpvzmymmx5o/bafkreig6frwni4imcmlaznul77xuqbiwt2u24wbhxauxhu42epuvlktmvq@jpeg', 'created_at': '2023-08-05T12:02:14.074Z', 'display_name': 'Wolfgang Huber', 'labels': [], 'viewer': {'blocked_by': False, 'blocking': None, 'blocking_by_list': None, 'followed_by': None, 'following': 'at://did:plc:6p3e4iybr5ipik3c6tx3jpto/app.bsky.graph.follow/3lba7kqvlsp2u', 'known_followers': None, 'muted': False, 'muted_by_list': None, 'py_type': 'app.bsky.actor.defs#viewerState'}, 'py_type': 'app.bsky.actor.defs#profileViewBasic'}], 'py_type': 'app.bsky.actor.defs#knownFollowers'}, 'muted': False, 'muted_by_list': None, 'py_type': 'app.bsky.actor.defs#viewerState'}, 'py_type': 'app.bsky.actor.defs#profileViewDetailed'}]}

```